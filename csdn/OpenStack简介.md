　OpenStack简介 　　OpenStack既是一个社区，也是一个项目和一个开源软件，它提供了一个部署云的操作平台或工具集。其宗旨在于：帮助组织运行为虚
拟计算或存储服务的云，为公有云、私有云，也为大云、小云提供可扩展的、灵活的云计算。 　　以下是OpenStack的重要构成部分： Nova -
计算服务Swift - 对象存储服务Glance - 镜像服务Keystone - 认证服务Horizon - UI服务Neutron-
网络服务Cinder-块存储服务Ceilometer-监控服务Heat-集群服务Trove-数据库服务 　　架构图：   　　部分组件深入介绍
1.OpenStack认证服务（Keystone）
Keystone为所有的OpenStack组件提供认证和访问策略服务，它依赖自身REST（基于Identity API）系统进行工作，主要对（但不限于）Sw
ift、Glance、Nova等进行认证与授权。事实上，授权通过对动作消息来源者请求的合法性进行鉴定。下图显示了身份认证服务流程：
Keystone采用两种授权方式，一种基于用户名/密码，另一种基于令牌（Token）。除此之外，Keystone提供以下三种服务：
令牌服务：含有授权用户的授权信息目录服务：含有用户合法操作的可用服务列表策略服务：利用Keystone具体指定用户或群组某些访问权限 　　认证服务组件：
服务入口：如Nova、Swift和Glance一样每个OpenStack服务都拥有一个指定的端口和专属的URL，我们称其为入口（endpoints）。 区位
：在某个数据中心，一个区位具体指定了一处物理位置。在典型的云架构中，如果不是所有的服务都访问分布式数据中心或服务器的话，则也称其为区位。用户：Keyston
e授权使用者 　　PS：代表一个个体，OpenStack以用户的形式来授权服务给它们。用户拥有证书（credentials），且可能分配给一个或多个租户。经
过验证后，会为每个单独的租户提供一个特定的令牌。 服务：总体而言，任何通过Keystone进行连接或管理的组件都被称为服务。举个例子，我们可以称Glance
为Keystone的服务。角色：为了维护安全限定，就云内特定用户可执行的操作而言，该用户关联的角色是非常重要的。 　　PS：一个角色是应用于某个租户的使用权
限集合，以允许某个指定用户访问或使用特定操作。角色是使用权限的逻辑分组，它使得通用的权限可以简单地分组并绑定到与某个指定租户相关的用户。
租间：租间指的是具有全部服务入口并配有特定成员角色的一个项目。 　　PS：一个租间映射到一个Nova的“project-
id”，在对象存储中，一个租间可以有多个容器。根据不同的安装方式，一个租间可以代表一个客户、帐号、组织或项目。 　　 　　2.OpenStack计算设施
----Nova 　　Nova是OpenStack计算的弹性控制器。OpenStack云实例生命期所需的各种动作都将由Nova进行处理和支撑，这就意味着No
va以管理平台的身份登场，负责管理整个云的计算资源、网络、授权及测度。虽然Nova本身并不提供任何虚拟能力，但是它将使用libvirt
API与虚拟机的宿主机进行交互。Nova通过Web服务API来对外提供处理接口，而且这些接口与Amazon的Web服务接口是兼容的。 　　功能及特点：
实例生命周期管理l计算资源管理 网络与授权管理l基于REST的APIl异步连续通信
支持各种宿主：Xen、XenServer/XCP、KVM、UML、VMware vSphere及Hyper-V 　　OpenStack计算部件：
Nova弹性云包含以下主要部分： API Server（nova-api）消息队列（rabbit-mq server）运算工作站（nova-compute）
网络控制器（nova-network）卷管理（nova-volume）调度器（nova-scheduler） 　　 　　API服务器（nova-api）
API服务器提供了云设施与外界交互的接口，它是外界用户对云实施管理的唯一通道。通过使用web服务来调用各种EC2的API，接着API服务器便通过消息队列把请
求送达至云内目标设施进行处理。作为对EC2-api的替代，用户也可以使用OpenStack的原生API，我们把它叫做“OpenStack API”。
消息队列（Rabbit MQ Server） 　　OpenStack内部在遵循AMQP（高级消息队列协议）的基础上采用消息队列进行通信。Nova对请求应答进
行异步调用，当请求接收后便则立即触发一个回调。由于使用了异步通信，不会有用户的动作被长置于等待状态。例如，启动一个实例或上传一份镜像的过程较为耗时，API调
用就将等待返回结果而不影响其它操作，在此异步通信起到了很大作用，使整个系统变得更加高效。 　　调度器（nova-scheduler）
调度器负责把nova-API调用送达给目标。调度器以名为“nova-schedule”的守护进程方式运行，并根据调度算法从可用资源池中恰当地选择运算服务器。
有很多因素都可以影响调度结果，比如负载、内存、子节点的远近、CPU架构等等。强大的是nova调度器采用的是可插入式架构。
目前nova调度器使用了几种基本的调度算法： 　　随机化：主机随机选择可用节点； 　　可用化：与随机相似，只是随机选择的范围被指定；
简单化：应用这种方式，主机选择负载最小者来运行实例。负载数据可以从别处获得，如负载均衡服务器。 　　运算工作站（nova-compute） 　　运算工作站的
主要任务是管理实例的整个生命周期。他们通过消息队列接收请求并执行，从而对实例进行各种操作。在典型实际生产环境下，会架设许多运算工作站，根据调度算法，一个实例
可以在可用的任意一台运算工作站上部署。 　　网络控制器（nova-network）
网络控制器处理主机的网络配置，例如IP地址分配，配置项目VLAN，设定安全群组以及为计算节点配置网络。 　　卷工作站（nova-volume）
卷工作站管理基于LVM的
实例卷，它能够为一个实例创建、删除、附加卷，也可以从一个实例中分离卷。卷管理为何如此重要？因为它提供了一种保持实例持续存储的手段，比如当结束一个
实例后，根分区如果是非持续化的，那么对其的任何改变都将丢失。可是，如果从一个实例中将卷分离出来，或者为这个实例附加上卷的话，即使实例被关闭，数据
仍然保存其中。这些数据可以通过将卷附加到原实例或其他实例的方式而重新访问。
因此，为了日后访问，重要数据务必要写入卷中。这种应用对于数据服务器实例的存储而言，尤为重要。 　　 　　3.OpenStack镜像服务器----Glance
OpenStack镜像服务器是一套虚拟机镜像发现、注册、检索系统，我们可以将镜像存储到以下任意一种存储中：
本地文件系统（默认）S3直接存储S3对象存储（作为S3访问的中间渠道）OpenStack对象存储等等。 　　功能及特点： 　　提供镜像相关服务。
Glance构件： Glance-API：
主要负责接收响应镜像管理命令的Restful请求，分析消息请求信息并分发其所带的命令（如新增，删除，更新等）。默认绑定端口是9292。 Glance-
Registry：
主要负责接收响应镜像元数据命令的Restful请求。分析消息请求信息并分发其所带的命令（如获取元数据，更新元数据等）。默认绑定的端口是9191。
4.OpenStack存储设施----Swift 　　Swift为OpenStack提供一种分布式、持续虚拟对象存储，它类似于Amazon Web Serv
ice的S3简单存储服务。Swift具有跨节点百级对象的存储能力。Swift内建冗余和失效备援管理，也能够处理归档和媒体流，特别是对大数据（千兆字节）和大容
量（多对象数量）的测度非常高效。 　　功能及特点：　　 海量对象存储大文件（对象）存储数据冗余管理归档能力-----
处理大数据集为虚拟机和云应用提供数据容器处理流媒体对象安全存储备份与归档良好的可伸缩性 　　　Swift组件 Swift账户
Swift容器Swift对象Swift代理Swift RING 　　Swift代理服务器　　 　　用户都是通过Swift-
API与代理服务器进行交互，代理服务器正是接收外界请求的门卫，它检测合法的实体位置并路由它们的请求。
此外，代理服务器也同时处理实体失效而转移时，故障切换的实体重复路由请求。 　　Swift对象服务器 　　对象服务器是一种二进制存储，它负责处理本地存储中的对
象数据的存储、检索和删除。对象都是文件系统中存放的典型的二进制文件，具有扩展文件属性的元数据（xattr）。 　　注意：xattr格式被Linux中的ext
3/4，XFS，Btrfs，JFS和ReiserFS所支持，但是并没有有效测试证明在XFS，JFS，ReiserFS，Reiser4和ZFS下也同样能运行良
好。不过，XFS被认为是当前最好的选择。 　　Swift容器服务器 　　容器服务器将列出一个容器中的所有对象，默认对象列表将存储为SQLite文件（译者注：
也可以修改为MySQL，安装中就是以MySQL为例）。容器服务器也会统计容器中包含的对象数量及容器的存储空间耗费。 　　Swift账户服务器
账户服务器与容器服务器类似，将列出容器中的对象。 　　Ring（索引环） 　　Ring容器记录着Swift中物理存储对象的位置信息，它是真实物理存储位置的实
体名的虚拟映射，类似于查找及定位不同集群的实体真实物理位置的索引服务。这里所谓的实体指账户、容器、对象，它们都拥有属于自己的不同的Rings。
5.OpenStack管理的Web接口----Horizon 　　Horizon是一个用以管理、控制OpenStack服务的Web控制面板，它可以管理实例、
镜像、创建密匙对，对实例添加卷、操作Swift容器等。除此之外，用户还可以在控制面板中使用终端（console）或VNC直接访问实例。总之，Horizon具
有如下一些特点：　　 实例管理：创建、终止实例，查看终端日志，VNC连接，添加卷等访问与安全管理：创建安全群组，管理密匙对，设置浮动IP等
偏好设定：对虚拟硬件模板可以进行不同偏好设定镜像管理：编辑或删除镜像 查看服务目录管理用户、配额及项目用途 用户管理：创建用户等
卷管理：创建卷和快照对象存储处理：创建、删除容器和对象为项目下载环境变量

